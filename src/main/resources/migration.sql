create table KB_SOST
(
  id                     VARCHAR2(38) not null,
  fk_id                  VARCHAR2(38),
  id_obsl                VARCHAR2(38),
  id_sost                VARCHAR2(38),
  id_tir                 VARCHAR2(38),
  id_gtd                 VARCHAR2(38),
  id_isp                 VARCHAR2(38),
  id_du                  VARCHAR2(38),
  id_ttn                 VARCHAR2(38),
  dt_sost                DATE default SYSDATE,
  dt_sost_end            DATE,
  sost_doc               VARCHAR2(100),
  sost_prm               VARCHAR2(4000),
  cnt_usl                NUMBER(16,4),
  kpogr                  NUMBER(16,6),
  ves_gruz               NUMBER(10,2),
  ora_user_edit_row_name VARCHAR2(30),
  ora_user_edit_row_date DATE,
  ora_user_edit_row_lock NUMBER default 0 not null,
  vol_gruz               NUMBER(10,2),
  id_sch1                VARCHAR2(38),
  id_vol                 VARCHAR2(38),
  id_sch2                VARCHAR2(38),
  id_val                 VARCHAR2(38),
  fakt_st                NUMBER(20,4),
  kurs                   NUMBER(12,4),
  cnt_usl2               NUMBER(16,4),
  kpogr2                 NUMBER(16,6),
  ves_gruz2              NUMBER(10,2),
  vol_gruz2              NUMBER(10,2),
  id_vol2                VARCHAR2(38),
  fakt_st2               NUMBER(20,4),
  kurs2                  NUMBER(12,4),
  sum_all                NUMBER(20,4),
  sum_all2               NUMBER(20,4),
  fakt_usd2              NUMBER(20,4),
  fakt_usd               NUMBER(20,4),
  cnt_usl1               NUMBER(16,4),
  kpogr1                 NUMBER(16,6),
  ves_gruz1              NUMBER(10,2),
  vol_gruz1              NUMBER(10,2),
  id_vol1                VARCHAR2(38),
  fakt_st1               NUMBER(20,4),
  p_marsh                VARCHAR2(100),
  fl_marsh               VARCHAR2(150),
  row_creator            VARCHAR2(30),
  row_creation_time      DATE,
  kurs_usd               NUMBER(12,4),
  id_val2                VARCHAR2(38),
  kurs_usd2              NUMBER(12,4),
  id_fl                  VARCHAR2(38),
  mest                   NUMBER(6),
  g32_old                NUMBER(4),
  id_call                VARCHAR2(38),
  id_tk                  VARCHAR2(38),
  id_podr                VARCHAR2(38),
  id_strn                VARCHAR2(38),
  id_doc                 VARCHAR2(38),
  id_dog                 VARCHAR2(38),
  dt_doc                 DATE,
  id_svh                 VARCHAR2(38),
  id_tzs                 VARCHAR2(38),
  id_stt                 VARCHAR2(38),
  ng_cox                 INTEGER,
  ngv_cox                NUMBER(2),
  kngv_cox               NUMBER(10,4),
  id_dok                 VARCHAR2(38),
  id_upak                VARCHAR2(38),
  marker2                VARCHAR2(255),
  marker3                VARCHAR2(1200),
  id_pack_def            VARCHAR2(38),
  ei                     VARCHAR2(38),
  storage_cond_id        VARCHAR2(38),
  eo_ves_ot              VARCHAR2(38),
  eo_ves_do              VARCHAR2(38),
  ves_fact               NUMBER(1),
  alg                    NUMBER(1),
  tip_coef               VARCHAR2(38),
  uei                    VARCHAR2(38),
  g32                    VARCHAR2(32),
  cnt_uei                NUMBER(16,4)
)
create table KB_TTN
(
  id                     VARCHAR2(38) not null,
  fk_id                  VARCHAR2(38),
  id_obsl                VARCHAR2(38),
  n_tovar                VARCHAR2(255),
  kol_tovar              VARCHAR2(40),
  pak_tovar              VARCHAR2(255),
  spos_tr                VARCHAR2(100),
  st_gruz                NUMBER(16,2),
  mest                   NUMBER(9),
  ves_brutto             NUMBER(12,1),
  ttn_n                  VARCHAR2(70),
  usl                    VARCHAR2(1200),
  ul_otpr                VARCHAR2(255),
  adr_otpr               VARCHAR2(64),
  fl_otpr                VARCHAR2(100),
  ul_pol                 VARCHAR2(100),
  adr_pol                VARCHAR2(100),
  fl_pol                 VARCHAR2(100),
  ora_user_edit_row_name VARCHAR2(30),
  ora_user_edit_row_date DATE,
  ora_user_edit_row_lock NUMBER not null,
  row_creator            VARCHAR2(30),
  row_creation_time      DATE,
  id_val                 VARCHAR2(38),
  id_ntk                 VARCHAR2(38),
  id_tk                  VARCHAR2(38),
  id_call                VARCHAR2(38),
  id_tir                 VARCHAR2(38),
  nedostacha             NUMBER(16,3),
  izlishki               NUMBER(16,3),
  vozvrat                NUMBER(16,3),
  brak                   NUMBER(16,3),
  vbd_box                VARCHAR2(200),
  srok_godn              DATE,
  dtd_logic              VARCHAR2(7),
  vbd_state_gp           NUMBER(1)
)
create table KB_T_MDET
(
  id_sost VARCHAR2(32),
  id_obsl VARCHAR2(32),
  f01     VARCHAR2(1200),
  f02     VARCHAR2(1200),
  f03     VARCHAR2(1200),
  f04     VARCHAR2(1200),
  f05     VARCHAR2(1200),
  f06     VARCHAR2(1200),
  f07     VARCHAR2(1200),
  f08     VARCHAR2(1200),
  f09     VARCHAR2(1200),
  f10     VARCHAR2(1200),
  f11     VARCHAR2(1200),
  f12     VARCHAR2(1200),
  f13     VARCHAR2(1200),
  f14     VARCHAR2(1200),
  f15     VARCHAR2(1200),
  f16     VARCHAR2(1200),
  f17     VARCHAR2(1200),
  f18     VARCHAR2(1200),
  f19     VARCHAR2(1200),
  f20     VARCHAR2(1200),
  f21     VARCHAR2(1200)
)
create table KB_T_MDET
(
  id_sost VARCHAR2(32),
  id_obsl VARCHAR2(32),
  f01     VARCHAR2(1200),
  f02     VARCHAR2(1200),
  f03     VARCHAR2(1200),
  f04     VARCHAR2(1200),
  f05     VARCHAR2(1200),
  f06     VARCHAR2(1200),
  f07     VARCHAR2(1200),
  f08     VARCHAR2(1200),
  f09     VARCHAR2(1200),
  f10     VARCHAR2(1200),
  f11     VARCHAR2(1200),
  f12     VARCHAR2(1200),
  f13     VARCHAR2(1200),
  f14     VARCHAR2(1200),
  f15     VARCHAR2(1200),
  f16     VARCHAR2(1200),
  f17     VARCHAR2(1200),
  f18     VARCHAR2(1200),
  f19     VARCHAR2(1200),
  f20     VARCHAR2(1200),
  f21     VARCHAR2(1200)
)
create table KB_SPROS
(
  id                     VARCHAR2(38) not null,
  fk_id                  VARCHAR2(38),
  n_zakaza               VARCHAR2(15),
  dt_zakaz               DATE,
  id_zak                 VARCHAR2(38),
  id_pok                 VARCHAR2(38),
  id_dpok                VARCHAR2(38),
  fio_knt                VARCHAR2(100),
  usl                    VARCHAR2(500),
  ora_user_edit_row_name VARCHAR2(30),
  ora_user_edit_row_date DATE,
  ora_user_edit_row_lock NUMBER default 0 not null,
  id_kat                 VARCHAR2(38),
  npost                  VARCHAR2(100),
  id_tir                 VARCHAR2(38),
  row_creator            VARCHAR2(30),
  row_creation_time      DATE,
  kpost                  NUMBER(3),
  id_spros               VARCHAR2(38),
  kr                     VARCHAR2(1),
  n_tir                  VARCHAR2(100),
  n_gtd                  VARCHAR2(100),
  n_skl                  VARCHAR2(50),
  mest                   VARCHAR2(10),
  n_gruz                 VARCHAR2(50),
  ptd                    NUMBER(1),
  is_postavka            NUMBER(1)
)
create table KB_ZAK
(
  id                     VARCHAR2(38) not null,
  fk_id                  VARCHAR2(38),
  id_tip_zak             VARCHAR2(38),
  id_tip_zak2            VARCHAR2(38),
  inn_zak                VARCHAR2(13),
  id_klient              NUMBER(6),
  id_kopf                VARCHAR2(38),
  n_zak                  VARCHAR2(256),
  naimen                 VARCHAR2(256),
  id_strana              VARCHAR2(38),
  p_ind                  NUMBER(6),
  ur_adr                 VARCHAR2(300),
  fio                    VARCHAR2(100),
  tlf                    VARCHAR2(60),
  fax                    VARCHAR2(60),
  email                  VARCHAR2(500),
  web                    VARCHAR2(60),
  fio_knt                VARCHAR2(3000),
  rs                     VARCHAR2(20),
  brs                    VARCHAR2(70),
  ks                     VARCHAR2(20),
  bks                    VARCHAR2(70),
  bik                    VARCHAR2(10),
  okpo                   NUMBER(8),
  okonx                  VARCHAR2(70),
  id_okonx               VARCHAR2(38),
  account                VARCHAR2(40),
  baccount               VARCHAR2(70),
  swift                  VARCHAR2(40),
  licen                  VARCHAR2(20),
  dt_licen               DATE,
  prim                   VARCHAR2(500),
  id_ved                 VARCHAR2(38),
  ora_user_edit_row_name VARCHAR2(30),
  ora_user_edit_row_date DATE,
  ora_user_edit_row_lock NUMBER not null,
  dt_reg                 DATE,
  fio_rec                VARCHAR2(100),
  id_ist                 VARCHAR2(38),
  id_fl                  VARCHAR2(38),
  dt_end                 DATE,
  kpp_zak                NUMBER(9),
  row_creator            VARCHAR2(30),
  row_creation_time      DATE,
  n_eng                  VARCHAR2(150),
  adr_eng                VARCHAR2(300),
  c_account              VARCHAR2(20),
  bacc_int               VARCHAR2(70),
  swift_int              VARCHAR2(40),
  fio_rod                VARCHAR2(100),
  id_usr                 VARCHAR2(38),
  tlf_smst               VARCHAR2(100),
  rus_sms                NUMBER(1),
  tir_vod                NUMBER(1),
  dt_licen_end           DATE,
  ins_mail               NUMBER(1),
  kod_no                 VARCHAR2(100),
  is_car                 NUMBER(1),
  is_sup                 NUMBER(1),
  is_holder              NUMBER(1),
  is_cust                NUMBER(1),
  id_wms                 VARCHAR2(20),
  id_info                VARCHAR2(12),
  prf_wms                VARCHAR2(3),
  dn_dost                NUMBER(2),
  id_no_accept           VARCHAR2(38),
  p_in                   NUMBER(5,2),
  p_out                  NUMBER(5,2),
  p_kol                  INTEGER,
  list_reg               NUMBER(1),
  am_ord                 NUMBER(3),
  dov_inf                VARCHAR2(4000),
  id_svh                 VARCHAR2(38)
)
create table KB_TIR
(
  id                     VARCHAR2(38) not null,
  fk_id                  VARCHAR2(38),
  id_iper                VARCHAR2(38),
  id_per                 VARCHAR2(38),
  id_dog                 VARCHAR2(38),
  id_trans               VARCHAR2(38),
  id_tip_tr              VARCHAR2(38),
  ob_tr                  VARCHAR2(38),
  st_fraht               VARCHAR2(22),
  n_avto                 VARCHAR2(40),
  n_pric                 VARCHAR2(40),
  vodit                  VARCHAR2(100),
  n_tir                  VARCHAR2(100),
  ves_tir                NUMBER(7),
  ves_am                 NUMBER(7),
  cm_n                   VARCHAR2(10),
  ora_user_edit_row_name VARCHAR2(30),
  ora_user_edit_row_date DATE,
  ora_user_edit_row_lock NUMBER not null,
  ves_pric               NUMBER(7),
  ves_br_cmr             NUMBER(7),
  ves_nt_cmr             NUMBER(7),
  usl                    VARCHAR2(2000),
  n_poruch               VARCHAR2(20),
  dt_poruch              DATE,
  marka_ts               VARCHAR2(15),
  n_poruch_z             VARCHAR2(20),
  dt_poruch_z            DATE,
  row_creator            VARCHAR2(30),
  row_creation_time      DATE,
  n_cont                 VARCHAR2(150),
  n_gtd                  VARCHAR2(100),
  n_skl                  VARCHAR2(50),
  mest                   VARCHAR2(10),
  n_pack                 VARCHAR2(15),
  id_klient              NUMBER(6),
  id_svh                 VARCHAR2(38),
  id_osm                 VARCHAR2(38),
  id_exp                 VARCHAR2(38),
  id_exp_knt             VARCHAR2(38),
  id_yam                 VARCHAR2(38),
  id_adr                 VARCHAR2(38),
  dt_dost                DATE,
  is_cycle               VARCHAR2(38),
  tel_am                 VARCHAR2(40),
  ves_ts                 NUMBER(10,2)
)
create global temporary table KB_T_MASTER
(
  id_sost             VARCHAR2(32),
  id_obsl             VARCHAR2(32),
  id_wms_zak          VARCHAR2(32),
  id_wms_pok          VARCHAR2(32),
  id_wms_pok_original VARCHAR2(32),
  id_wms_per          VARCHAR2(32),
  kpost               NUMBER,
  f01                 VARCHAR2(128),
  f02                 VARCHAR2(128),
  f03                 VARCHAR2(128),
  f04                 VARCHAR2(128),
  f05                 VARCHAR2(128),
  f06                 VARCHAR2(128),
  f07                 VARCHAR2(128),
  f08                 VARCHAR2(128),
  f09                 VARCHAR2(128),
  f10                 VARCHAR2(128),
  f11                 VARCHAR2(128),
  f12                 VARCHAR2(128),
  f13                 VARCHAR2(128),
  f14                 VARCHAR2(128),
  f15                 VARCHAR2(128),
  f16                 VARCHAR2(128),
  f17                 VARCHAR2(128),
  f18                 VARCHAR2(128),
  f19                 VARCHAR2(128),
  f20                 VARCHAR2(128)
)